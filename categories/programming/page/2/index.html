<!doctype html><html lang=cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Programming | MoonLab</title>
<meta name=keywords content><meta name=description content="To the Moon"><meta name=author content="LingC"><link rel=canonical href=https://moonlab.top/categories/programming/><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"],["$","$"]]},loader:{load:["ui/safe"]}}</script><link crossorigin=anonymous href=/assets/css/stylesheet.1ff5a7b3bb4a96bf1747dfa25e8031167d4537d7ae4b78fac2b752886047a06e.css rel="preload stylesheet" as=style><link rel=icon href=/moon.svg type=image/svg+xml><link rel=icon type=image/png sizes=16x16 href=https://moonlab.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://moonlab.top/favicon-32x32.png><link rel=apple-touch-icon href=https://moonlab.top/apple-touch-icon.png><link rel=mask-icon href=https://moonlab.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://moonlab.top/categories/programming/index.xml><link rel=alternate hreflang=cn href=https://moonlab.top/categories/programming/><link rel=alternate hreflang=en href=https://moonlab.top/en/categories/programming/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Programming"><meta property="og:description" content="To the Moon"><meta property="og:type" content="website"><meta property="og:url" content="https://moonlab.top/categories/programming/"><meta property="og:site_name" content="MoonLab"><meta name=twitter:card content="summary"><meta name=twitter:title content="Programming"><meta name=twitter:description content="To the Moon"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://moonlab.top/ accesskey=h title="MoonLab (Alt + H)"><img src=/moon.svg alt aria-label=logo height=20>MoonLab</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://moonlab.top/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://moonlab.top/archives/ title=归档><span>归档</span></a></li><li><a href=https://moonlab.top/search/ title=搜索><span>搜索</span></a></li><li><a href=https://moonlab.top/about/ title=关于><span>关于</span></a></li><li><a href=https://www.travellings.cn/go.html target=_blank title=开往><span>开往</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><div class=body-layout><div class=leftbar></div><main class=main><header class=page-header><h1>Programming</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android Shizuku源码分析 第二篇</h2></header><div class=entry-content><p>本文深入分析了 Shizuku 的启动过程，特别是 Starter 类的 main 方法是如何被调用的。文章首先回顾了 Shizuku 的基本概念，并介绍了通过 adb 命令激活 ShizukuService 的过程，重点分析了 start.sh 脚本的执行。当用户通过 ShizukuManager 启动应用时，start.sh 脚本被调用，该脚本负责设置环境并执行 libshizuku.so 文件。文章详细描述了 ShizukuManager 在启动时如何写入 start.sh 文件及其相关的 dex 文件路径。接着，文章探讨了 libshizuku.so 中的 main 方法，说明了如何通过 app_process 启动 Java 类 moe.shizuku.server.Starter。在 Starter 类的 main 方法中，创建了 ShizukuService 实例，从而完成了 ShizukuService 的启动。最后，作者总结了整个过程，强调了用户通过简单的 adb 命令如何触发一系列复杂的操作，最终实现 Shizuku 的功能。</p></div><footer class=entry-footer><span title='2020-02-04 11:43:10 +0000 UTC'>February 4, 2020</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Android Shizuku源码分析 第二篇" href=https://moonlab.top/posts/2020/android-shizuku-theory2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android Shizuku源码分析</h2></header><div class=entry-content><p>本文分析了 Shizuku 的源码，介绍了其如何通过 Binder 实现与 Android 系统服务的交互。Shizuku 应用引导用户以 root 或 adb 方式运行服务进程，利用 ShizukuBinderWrapper 进行系统隐藏 API 的调用。文章详细探讨了 ShizukuBinderWrapper 的构造、transact 方法及其与 IShizukuService 的通信过程，最后简要提及 ShizukuService 的启动流程。作者计划进一步深入分析 Shizuku 的启动机制。</p></div><footer class=entry-footer><span title='2020-02-02 19:24:10 +0000 UTC'>February 2, 2020</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Android Shizuku源码分析" href=https://moonlab.top/posts/2020/android-shizuku-theory/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android 监听第三方Activity的一举一动</h2></header><div class=entry-content><p>这篇文章主要记录了作者在2019年初的个人感受和一些技术探索。作者回顾了过去一年的经历，感到没有太多进展，并提到冬季的天气和国内的传染病情况。尽管在家中待得久了，作者也提到了一些娱乐活动，比如观看动画和春晚，但整体上对新番的期待逐渐减弱。在技术方面，作者分享了在Android开发中监听Activity启动的需求，探讨了几种方法来获取Activity的类名。首先，作者提到使用ActivityManager的getRunningTasks方法，但由于权限限制，这种方法不可行。接着，作者提到UsageStatsManager只能获取应用包名，而无法获取Activity类名。最终，作者发现了IActivityController接口，并通过使用Shizuku工具来调用系统API，从而实现了监听Activity启动的功能。总结来说，文章结合了个人生活感受与技术探索，展示了作者在面对生活和技术挑战时的思考与解决方案。</p></div><footer class=entry-footer><span title='2020-02-01 18:39:25 +0000 UTC'>February 1, 2020</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Android 监听第三方Activity的一举一动" href=https://moonlab.top/posts/2020/android-activity-monitor/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android笔记#1 View的事件分发机制解析</h2></header><div class=entry-content><p>本文总结了《Android艺术开发探索》中关于View事件分发机制的内容。事件序列从ACTION_DOWN开始，经过多个ACTION_MOVE，最后以ACTION_UP结束。事件传递顺序为Activity -> Window -> DecorView -> RootView。事件分发主要通过dispatchTouchEvent、onInterceptTouchEvent和onTouchEvent三个方法实现。ViewGroup的onInterceptTouchEvent默认返回false，子View可通过OnTouchListener处理事件。总结指出，事件分发机制确保一个事件序列只能被一个View拦截和消耗，且OnTouchListener优先级高于onTouchEvent。</p></div><footer class=entry-footer><span title='2019-08-14 11:07:50 +0000 UTC'>August 14, 2019</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Android笔记#1 View的事件分发机制解析" href=https://moonlab.top/posts/2019/android-view-motionevent/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>知乎日报的问题</h2></header><div class=entry-content><p>作者在暑假期间开始开发一个第三方的知乎日报客户端，使用MVP架构。遇到了一些问题，如全局异常处理和JSON解析，选择使用Picasso加载图片。为了解决WebView中图片宽度过大的问题，作者通过JavaScript调整图片大小。最终，作者完成了基本的加载和查看功能，并在GitHub上分享了代码。尽管开发过程充满挑战，作者仍然享受这个过程。</p></div><footer class=entry-footer><span title='2019-07-04 20:34:10 +0000 UTC'>July 4, 2019</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to 知乎日报的问题" href=https://moonlab.top/posts/2019/android-zhihu-daily/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Ubnutu 无法启动网易云音乐 - 总结</h2></header><div class=entry-content><p>从垃圾堆里抛出来的一篇2018的文章. –2024.8.7
Author Avatar LingC 8 月 7 日
00 本文总结了16.04以上的版本运行网易云音乐会出现的问题，以及解决方法 如果你安装官方版本网易云音乐后（v1.1.0）,运行网易云音乐无响应的话可以试试以下几种方法
01 在终端中输入
$ netease-cloud-music –no-sandbox %U
即可启动网易云音乐
有可能会出现一些警告，稍后会打开网易云主界面
如果出现Unable to locate theme engine in module_path: “adwaita”
可以尝试执行这条命令：$ sudo apt install gnome-themes-standard
如果出现failed to retrieve propertygtk-primary-button-warps-slider’ of type gboolean'
可以尝试$ vi ~/.gtkrc-2.0
使用vim打开这个文件，将其中的一行改为
gtk-primary-button-warps-slider=false改为gtk-primary-button-warps-slider=0
然后可以再试着运行一下，如果还不行就reboot
如果出现Gtk-Message: 08:59:03.546: Failed to load module “canberra-gtk-module"或者没有反应，那么你可以试试第二种方法
02 在终端中输入
$ sudo netease-cloud-music
使用root权限运行网易云音乐
可能会出现一些警告和报错，其实可以无视（懒的管）
2018-08-07 09-00-03屏幕截图.png
03 可以试一下这个方法 https://jingyan.baidu.com/article/1e5468f956a15c484861b770.html
04 该方法针对于ubuntu 18.04LTS 网易云音乐v1.1.0
其他版本也可以试一下
首先
...</p></div><footer class=entry-footer><span title='2018-08-07 21:28:14 +0800 +0800'>August 7, 2018</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Ubnutu 无法启动网易云音乐 - 总结" href=https://moonlab.top/posts/2018/ubuntu-cannot-use-netease-music/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://moonlab.top/categories/programming/>«&nbsp;上一页&nbsp;</a></nav></footer></main><aside class=rightbar><div class=rightbar-categories><h3>分类</h3><ul class=rightbar-categories-first-list><li><a href=https://moonlab.top/categories/programming/>Programming</a> (16)<ul class=rightbar-categories-sec-list><li><a href=/tags/embeded>Embeded</a></li><li><a href=/tags/golang>golang</a></li><li><a href=/tags/linux>Linux</a></li><li><a href=/tags/android>Android</a></li></ul></li><li><a href=https://moonlab.top/categories/reverse/>Reverse</a> (1)<ul class=rightbar-categories-sec-list><li><a href=/tags/javascript>JavaScript</a></li></ul></li><li><a href=https://moonlab.top/categories/%E5%85%B6%E4%BB%96/>其他</a> (5)<ul class=rightbar-categories-sec-list><li><a href=/tags/blog>blog</a></li></ul></li><li><a href=https://moonlab.top/categories/%E7%AE%97%E6%B3%95/>算法</a> (4)<ul class=rightbar-categories-sec-list></ul></li></ul></div></aside></div><footer class=footer><img id=mooncounter-img style="margin:0 auto;margin-bottom:6px"></img>
<script src="//counter.moonlab.top/img?name=https://moonlab.top/"></script><span>&copy; 2025 <a href=https://moonlab.top/>MoonLab</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span><a href=https://www.travellings.cn/go.html rel=noopener target=_blank><img style=height:27px alt=travelling src=https://www.travellings.cn/assets/logo.svg></a></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>