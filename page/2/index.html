<!doctype html><html lang=cn dir=auto><head><meta name=generator content="Hugo 0.143.1"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>MoonLab</title>
<meta name=keywords content="Blog,MoonLab,LingC"><meta name=description content="To the Moon"><meta name=author content="LingC"><link rel=canonical href=https://moonlab.top/><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"],["$","$"]]},loader:{load:["ui/safe"]}}</script><link crossorigin=anonymous href=/assets/css/stylesheet.1ff5a7b3bb4a96bf1747dfa25e8031167d4537d7ae4b78fac2b752886047a06e.css rel="preload stylesheet" as=style><link rel=icon href=/moon.svg type=image/svg+xml><link rel=icon type=image/png sizes=16x16 href=https://moonlab.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://moonlab.top/favicon-32x32.png><link rel=apple-touch-icon href=https://moonlab.top/apple-touch-icon.png><link rel=mask-icon href=https://moonlab.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://moonlab.top/index.xml><link rel=alternate type=application/json href=https://moonlab.top/index.json><link rel=alternate hreflang=cn href=https://moonlab.top/><link rel=alternate hreflang=en href=https://moonlab.top/en/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="MoonLab"><meta property="og:description" content="To the Moon"><meta property="og:type" content="website"><meta property="og:url" content="https://moonlab.top/"><meta property="og:site_name" content="MoonLab"><meta name=twitter:card content="summary"><meta name=twitter:title content="MoonLab"><meta name=twitter:description content="To the Moon"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"MoonLab","url":"https://moonlab.top/","description":"To the Moon","thumbnailUrl":"https://moonlab.top/favicon.ico","sameAs":["https://github.com/HelloLingC","https://steamcommunity.com/id/lycoriszzz","mailto:me@moonlab.top"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://moonlab.top/ accesskey=h title="MoonLab (Alt + H)"><img src=/moon.svg alt aria-label=logo height=20>MoonLab</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://moonlab.top/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://moonlab.top/archives/ title=归档><span>归档</span></a></li><li><a href=https://moonlab.top/search/ title=搜索><span>搜索</span></a></li><li><a href=https://moonlab.top/about/ title=关于><span>关于</span></a></li><li><a href=https://www.travellings.cn/go.html target=_blank title=开往><span>开往</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><div class=body-layout><div class=leftbar></div><main class=main><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>[双系统] Windows 更新摧毁了我的Linux系统</h2></header><div class=entry-content><p>在 Windows 更新后，用户的 Linux 系统因等待 90 秒而无法启动，并且出现依赖失败。调查发现，Windows 调换了 Linux 分区和恢复分区的顺序，从而导致了问题。用户通过修复 Linux、更新 fstab、重新安装 Grub 和使用 efibootmgr 更改启动顺序解决了问题。</p></div><footer class=entry-footer><span title='2024-08-03 08:28:35 +0800 +0800'>August 3, 2024</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to [双系统] Windows 更新摧毁了我的Linux系统" href=https://moonlab.top/posts/2024/windows-update-broke-linux-system/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Golang embed 使用问题</h2></header><div class=entry-content><p>Golang 使用 embed 包在编译时将外部文件包含到二进制程序中。使用 embed 指令可以将 html、css、js 等静态文件添加到二进制文件中，而无需额外的资源文件。嵌入文件可以使用字符串、[]字节和 FS 来引用。但也有一些限制，如文件层次结构问题和复杂路径问题。例如，如果嵌入文件和被嵌入文件不在同一层次，嵌入模式将无法成功解析。另一个问题是处理复杂路径，即静态文件夹被放置在嵌入文件的子文件夹中。解决办法是使用 io/fs 软件包中的 Sub 方法来处理这些复杂路径。</p></div><footer class=entry-footer><span title='2023-12-27 08:10:39 +0000 UTC'>December 27, 2023</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Golang embed 使用问题" href=https://moonlab.top/posts/2023/golang-embed-package-use-issues/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Hexo博客自动备份插件 云盘备份支持</h2></header><div class=entry-content><p>本文讨论了博客数据备份方案，强调321原则：保留3个备份副本，使用2种不同储存介质，1个备份远离数据源。最初考虑使用GitHub Action进行备份，但发现其局限性。为此，开发了Hexo插件“hexo-auto-backup”，可在执行hexo deploy时自动备份重要文件到本地或云盘，支持多种云服务和协议。插件安装简单，通过npm安装。未来计划改进备份过期设置和多系统支持。详细信息可见插件的GitHub仓库。</p></div><footer class=entry-footer><span title='2023-12-19 21:38:50 +0000 UTC'>December 19, 2023</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Hexo博客自动备份插件 云盘备份支持" href=https://moonlab.top/posts/2023/hexo-auto-backup/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>通过汇编分析栈、函数调用 esp&amp;ebp</h2></header><div class=entry-content><p>栈是一种遵循后进先出（LIFO）规则的数据结构，通常用于内存管理。重要寄存器包括栈指针（SP）和基指针（BP）。在函数调用中，使用push将参数压入栈中，call指令保存返回地址。ESP寄存器指向栈顶，函数执行后需平衡栈。C语言函数调用中，参数通过EBP寻址，编译器可能使用mov而非push，使得ESP不指向栈顶，简化栈平衡的处理。</p></div><footer class=entry-footer><span title='2023-12-15 14:31:17 +0000 UTC'>December 15, 2023</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to 通过汇编分析栈、函数调用 esp&ebp" href=https://moonlab.top/posts/2023/aem-esp-ebp/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Git push 出现 permisson denied error 403</h2></header><div class=entry-content><p>在尝试使用 git push -u origin main 时，出现了权限错误，提示旧用户被拒绝访问。为了解决这个问题，作者尝试通过 git commit --amend --reset-author 重置提交作者，但问题依旧。最终在 Stack Overflow 找到解决方案：删除旧的凭证，成功解决了问题，节省了一个小时的时间。</p></div><footer class=entry-footer><span title='2023-09-15 12:09:04 +0000 UTC'>September 15, 2023</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Git push 出现 permisson denied error 403" href=https://moonlab.top/posts/2023/git-err/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>坑：Litepal save方法返回true却没有保存</h2></header><div class=entry-content><p>在开发 Madoka 日记时，做到导出导入的功能时，我想偷个懒导出直接用 Gson 将 Java 对象转换为 json 然后放在 txt 中，导入的时候再将 json 转为 javaBean 就行啦。
而数据库我用的是 Litepal 直接搞，使用这个库的好处就是速度快，方便，适合新手。
但其实 sqlite 的语法和一些其他的语句并不难，所以用这个库就是为了方便…
使用 Litepal 储存数据时，需要调用 save() 方法。
这里我就遇到了一个问题，明明 save() 方法返回的是 true ，但数据库里没有需要保存的数据啊？
Gson gson = new Gson(); Diary diary = gson.fromJson(json, Diary.class); return diary.save(); 这是调用 Gson 将 json 转换为 javabean 对象。
明明 Diary 的内容全是正确的，我开始询问度娘。
结果没找到跟我的问题直接相关的文章，结果我看到了有个人在吐槽啥 setting getting，我就想到了会不会是因为没有调用 Diary 的构造方法？
Diary 作为一个 Litepal 的，它是继承自 LitePalSupport 的，会不会是因为没有调用 LitePalSupport 的构造方法呢？
我将导入代码改了一下：
Gson gson = new Gson(); Diary diary = gson.fromJson(json, Diary.class); Diary saveDiary = new Diary(); saveDiary.setId(diary.getId()); saveDiary.setCreatedTime(diary.getCreatedTime()); saveDiary.setLastUpdatedTime(diary.getLastUpdatedTime()); ... 省略一万个代码 return saveDiary.save(); 果然，最后正常了…
...</p></div><footer class=entry-footer><span title='2020-02-24 11:52:38 +0000 UTC'>February 24, 2020</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to 坑：Litepal save方法返回true却没有保存" href=https://moonlab.top/posts/2020/pit-for-litepal-save/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android Shizuku源码分析 第二篇</h2></header><div class=entry-content><p>本文深入分析了 Shizuku 的启动过程，特别是 Starter 类的 main 方法是如何被调用的。文章首先回顾了 Shizuku 的基本概念，并介绍了通过 adb 命令激活 ShizukuService 的过程，重点分析了 start.sh 脚本的执行。当用户通过 ShizukuManager 启动应用时，start.sh 脚本被调用，该脚本负责设置环境并执行 libshizuku.so 文件。文章详细描述了 ShizukuManager 在启动时如何写入 start.sh 文件及其相关的 dex 文件路径。接着，文章探讨了 libshizuku.so 中的 main 方法，说明了如何通过 app_process 启动 Java 类 moe.shizuku.server.Starter。在 Starter 类的 main 方法中，创建了 ShizukuService 实例，从而完成了 ShizukuService 的启动。最后，作者总结了整个过程，强调了用户通过简单的 adb 命令如何触发一系列复杂的操作，最终实现 Shizuku 的功能。</p></div><footer class=entry-footer><span title='2020-02-04 11:43:10 +0000 UTC'>February 4, 2020</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Android Shizuku源码分析 第二篇" href=https://moonlab.top/posts/2020/android-shizuku-theory2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android Shizuku源码分析</h2></header><div class=entry-content><p>本文分析了 Shizuku 的源码，介绍了其如何通过 Binder 实现与 Android 系统服务的交互。Shizuku 应用引导用户以 root 或 adb 方式运行服务进程，利用 ShizukuBinderWrapper 进行系统隐藏 API 的调用。文章详细探讨了 ShizukuBinderWrapper 的构造、transact 方法及其与 IShizukuService 的通信过程，最后简要提及 ShizukuService 的启动流程。作者计划进一步深入分析 Shizuku 的启动机制。</p></div><footer class=entry-footer><span title='2020-02-02 19:24:10 +0000 UTC'>February 2, 2020</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Android Shizuku源码分析" href=https://moonlab.top/posts/2020/android-shizuku-theory/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android 监听第三方Activity的一举一动</h2></header><div class=entry-content><p>这篇文章主要记录了作者在2019年初的个人感受和一些技术探索。作者回顾了过去一年的经历，感到没有太多进展，并提到冬季的天气和国内的传染病情况。尽管在家中待得久了，作者也提到了一些娱乐活动，比如观看动画和春晚，但整体上对新番的期待逐渐减弱。在技术方面，作者分享了在Android开发中监听Activity启动的需求，探讨了几种方法来获取Activity的类名。首先，作者提到使用ActivityManager的getRunningTasks方法，但由于权限限制，这种方法不可行。接着，作者提到UsageStatsManager只能获取应用包名，而无法获取Activity类名。最终，作者发现了IActivityController接口，并通过使用Shizuku工具来调用系统API，从而实现了监听Activity启动的功能。总结来说，文章结合了个人生活感受与技术探索，展示了作者在面对生活和技术挑战时的思考与解决方案。</p></div><footer class=entry-footer><span title='2020-02-01 18:39:25 +0000 UTC'>February 1, 2020</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Android 监听第三方Activity的一举一动" href=https://moonlab.top/posts/2020/android-activity-monitor/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android笔记#1 View的事件分发机制解析</h2></header><div class=entry-content><p>本文总结了《Android艺术开发探索》中关于View事件分发机制的内容。事件序列从ACTION_DOWN开始，经过多个ACTION_MOVE，最后以ACTION_UP结束。事件传递顺序为Activity -> Window -> DecorView -> RootView。事件分发主要通过dispatchTouchEvent、onInterceptTouchEvent和onTouchEvent三个方法实现。ViewGroup的onInterceptTouchEvent默认返回false，子View可通过OnTouchListener处理事件。总结指出，事件分发机制确保一个事件序列只能被一个View拦截和消耗，且OnTouchListener优先级高于onTouchEvent。</p></div><footer class=entry-footer><span title='2019-08-14 11:07:50 +0000 UTC'>August 14, 2019</span>&nbsp;·&nbsp;LingC</footer><a class=entry-link aria-label="post link to Android笔记#1 View的事件分发机制解析" href=https://moonlab.top/posts/2019/android-view-motionevent/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://moonlab.top/>«&nbsp;上一页&nbsp;
</a><a class=next href=https://moonlab.top/page/3/>下一页&nbsp;&nbsp;»</a></nav></footer></main><aside class=rightbar><div class=rightbar-categories><h3>分类</h3><ul class=rightbar-categories-first-list><li><a href=https://moonlab.top/categories/programming/>Programming</a> (16)<ul class=rightbar-categories-sec-list><li><a href=/tags/embeded>Embeded</a></li><li><a href=/tags/golang>golang</a></li><li><a href=/tags/linux>Linux</a></li><li><a href=/tags/android>Android</a></li></ul></li><li><a href=https://moonlab.top/categories/reverse/>Reverse</a> (1)<ul class=rightbar-categories-sec-list><li><a href=/tags/javascript>JavaScript</a></li></ul></li><li><a href=https://moonlab.top/categories/%E5%85%B6%E4%BB%96/>其他</a> (5)<ul class=rightbar-categories-sec-list><li><a href=/tags/blog>blog</a></li></ul></li><li><a href=https://moonlab.top/categories/%E7%AE%97%E6%B3%95/>算法</a> (4)<ul class=rightbar-categories-sec-list></ul></li></ul></div></aside></div><footer class=footer><img id=mooncounter-img style="margin:0 auto;margin-bottom:6px"></img>
<script src="//counter.moonlab.top/img?name=https://moonlab.top/"></script><span>&copy; 2025 <a href=https://moonlab.top/>MoonLab</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span><a href=https://www.travellings.cn/go.html rel=noopener target=_blank><img style=height:27px alt=travelling src=https://www.travellings.cn/assets/logo.svg></a></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>